{% extends "index.html" %}
{% block title %}Profile | Workout Buddy{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto py-12 px-4">
  <h2 class="text-2xl font-bold mb-6">Edit Profile</h2>

  <form id="profile-form" class="space-y-4">
    <input type="text" name="full_name" placeholder="Full Name" class="w-full px-3 py-2 border rounded" required />
    <input type="number" name="age" placeholder="Age" class="w-full px-3 py-2 border rounded" required />
    <input type="text" name="gender" placeholder="Gender" class="w-full px-3 py-2 border rounded" />
    <input type="number" name="height" placeholder="Height (cm)" step="0.1" class="w-full px-3 py-2 border rounded" />
    <input type="number" name="weight" placeholder="Weight (kg)" step="0.1" class="w-full px-3 py-2 border rounded" />
    <input type="text" name="activity_level" placeholder="Activity Level" class="w-full px-3 py-2 border rounded" />
    <textarea name="goal" placeholder="Your Goal" class="w-full px-3 py-2 border rounded"></textarea>

    <button type="submit" class="bg-indigo-600 text-white py-2 px-4 rounded hover:bg-indigo-700">
      Save Profile
    </button>
  </form>

  <div id="result" class="mt-4 text-green-600 font-semibold hidden"></div>
</div>

<script>
  document.getElementById('profile-form').addEventListener('submit', async function (e) {
    e.preventDefault();

    const formData = new FormData(this);
    const data = Object.fromEntries(formData.entries());
    data.created_at = new Date().toISOString();

    const response = await fetch('http://localhost:8000/api/profile', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(data)
    });

    const result = await response.json();
    document.getElementById('result').innerText = result.msg;
    document.getElementById('result').classList.remove('hidden');
  });
</script>
{% endblock %}
